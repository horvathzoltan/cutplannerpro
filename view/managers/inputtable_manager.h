#pragma once

#include <QTableWidget>
//#include <optional>
#include "view/tableutils/rowid.h"
#include "model/cutting/plan/request.h"

class InputTableManager: public QObject {  // üîß QObject √∂r√∂kl√©s!
    Q_OBJECT                              // ‚ú® Qt metaobjektum makr√≥!

public:
    explicit InputTableManager(QTableWidget* table, QWidget* parent = nullptr);

    void addRow(const Cutting::Plan::Request& request);
    void removeRowById(const QUuid &requestId);

    void refresh_TableFromRegistry();

    void updateRow(const Cutting::Plan::Request& updated); // ‚¨ÖÔ∏è √∫j met√≥dus

    void clearTable();
signals:
    void deleteRequested(const QUuid& requestId);
    void editRequested(const QUuid& requestId);

private:
    QTableWidget* table;
    QWidget* parent;
    RowId _rowId;

public:
    static constexpr auto RequestId_Key = "requestId";

    //row1
    static constexpr int ColName     = 0; // Anyag neve
    //row2
    static constexpr int ColLength   = 0; // Hossz
    static constexpr int ColQty      = 1; // Mennyis√©g
    static constexpr int ColAction   = 2; // M≈±velet (pl. t√∂rl√©s gomb)
    //row3
    static constexpr int ColMetaRowSpanStart = 0; // Als√≥ √∂sszefoglal√≥ sor ‚Äì kiterjeszt√©s kezdete

};


